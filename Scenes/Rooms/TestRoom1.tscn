[gd_scene load_steps=10 format=4 uid="uid://bx4mxpppmwhsw"]

[ext_resource type="Texture2D" uid="uid://sf6o0j0efp10" path="res://Assets/Cells/celllsproto1.png" id="1_hrvie"]
[ext_resource type="Texture2D" uid="uid://tboo1un3lqde" path="res://Assets/Cells/celllsproto2.png" id="2_xouyy"]
[ext_resource type="PackedScene" uid="uid://dja6gsrix8rgw" path="res://Entities/Enemies/enemy_base.tscn" id="3_5aa4i"]
[ext_resource type="PackedScene" uid="uid://c6t1tjxjcgxb3" path="res://Assets/Lights/light_bulb.tscn" id="3_bjrfl"]
[ext_resource type="TileSet" uid="uid://c4vfhrr8teana" path="res://Assets/TileSets/Floor.tres" id="3_xouyy"]
[ext_resource type="Script" uid="uid://bcpvtu5hcwhc6" path="res://Scripts/light_bulb.gd" id="5_xouyy"]

[sub_resource type="Curve" id="Curve_5aa4i"]
_data = [Vector2(0, 0), 0.0, 16.213484, 0, 0, Vector2(0.17117119, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), -3.4014325, 0.0, 0, 0]
point_count = 3

[sub_resource type="Gradient" id="Gradient_hrvie"]
offsets = PackedFloat32Array(0, 0.10204082, 0.84183675, 1)
colors = PackedColorArray(1, 1, 1, 0, 1, 1, 1, 1, 0.7079665, 0.7079665, 0.7079664, 1, 0.52906674, 0.5290667, 0.5290667, 0)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bjrfl"]
size = Vector2(1552, 1296)

[node name="TestRoom1" type="Node2D"]

[node name="Particles" type="Node2D" parent="."]

[node name="RED_BG_PARTICLES" type="CPUParticles2D" parent="Particles"]
process_mode = 3
z_index = -1020
position = Vector2(32, -40)
texture = ExtResource("1_hrvie")
lifetime = 30.0
preprocess = 4.0
emission_shape = 3
emission_rect_extents = Vector2(256, 256)
direction = Vector2(0, 0)
spread = 90.0
gravity = Vector2(0, 0)
initial_velocity_min = 10.0
initial_velocity_max = 20.0
angular_velocity_min = -15.0
angular_velocity_max = 15.0
orbit_velocity_max = 0.01
angle_min = -30.0
angle_max = 30.0
scale_amount_min = 0.01
scale_amount_max = 0.06
scale_amount_curve = SubResource("Curve_5aa4i")
color_ramp = SubResource("Gradient_hrvie")
anim_offset_max = 1.0

[node name="GREEN_BG_PARTICLES2" type="CPUParticles2D" parent="Particles"]
process_mode = 3
z_index = -1020
position = Vector2(32, -40)
rotation = -2.3561945
texture = ExtResource("2_xouyy")
lifetime = 30.0
preprocess = 4.0
emission_shape = 3
emission_rect_extents = Vector2(256, 256)
direction = Vector2(0, 0)
spread = 90.0
gravity = Vector2(0, 0)
initial_velocity_min = 10.0
initial_velocity_max = 20.0
angular_velocity_min = -15.0
angular_velocity_max = 15.0
orbit_velocity_max = 0.01
angle_min = -30.0
angle_max = 30.0
scale_amount_min = 0.01
scale_amount_max = 0.06
scale_amount_curve = SubResource("Curve_5aa4i")
color_ramp = SubResource("Gradient_hrvie")
anim_offset_max = 1.0

[node name="Ground" type="TileMapLayer" parent="."]
z_index = -99
tile_map_data = PackedByteArray("AAAAAP//BAABAAEAAAAAAAAABAABAAEAAAAAAAEABAABAAIAAAABAAEABAABAAIAAAABAAAABAABAAEAAAABAP//BAABAAEAAAACAP//BAABAAEAAAAAAP7/BAABAAEAAAABAP7/BAABAAQAAAACAP7/BAABAAEAAAADAP7/BAABAAEAAAADAP//BAABAAEAAAADAAAABAABAAEAAAACAAAABAABAAEAAAACAAEABAABAAIAAAADAAEABAABAAIAAAAEAAEABAABAAIAAAAEAAAABAABAAEAAAAEAP//BAABAAEAAAAEAP7/BAABAAEAAAAFAAAABAABAAEAAAAFAAEABAABAAIAAAAGAAAABAACAAEAAAAGAAEABAACAAIAAAAFAP7/BAABAAEAAAAFAP//BAABAAEAAAAGAP7/BAABAAEAAAAGAP//BAABAAEAAAD+/wAABAABAAEAAAD+/wEABAABAAIAAAD//wAABAABAAEAAAD//wEABAABAAIAAAD/////BAABAAQAAAD+////BAABAAEAAAD+//7/BAABAAEAAAD+//3/BAABAAEAAAD///3/BAABAAEAAAD///7/BAABAAEAAAD+//z/BAABAAEAAAD///z/BAABAAEAAAAAAPz/BAABAAEAAAABAPz/BAABAAEAAAABAP3/BAABAAEAAAACAP3/BAABAAEAAAAAAP3/BAABAAEAAAADAP3/BAABAAEAAAADAPz/BAABAAEAAAACAPz/BAABAAEAAAD///v/BAABAAEAAAD+//v/BAABAAEAAAD+//r/BAABAAEAAAD///r/BAABAAEAAAAAAPr/BAABAAEAAAABAPr/BAABAAEAAAAAAPv/BAABAAEAAAABAPv/BAABAAEAAAACAPv/BAABAAEAAAACAPr/BAABAAEAAAADAPr/BAABAAEAAAADAPv/BAABAAEAAAD9////BAAAAAEAAAD9//7/BAABAAEAAAD9//3/BAABAAEAAAD9//z/BAAAAAEAAAD9//v/BAAAAAEAAAD9//r/BAAAAAEAAAD9//n/BAAAAAAAAAD+//n/BAABAAAAAAD///n/BAABAAAAAAAAAPn/BAABAAAAAAABAPn/BAABAAEAAAACAPn/BAABAAEAAAADAPn/BAABAAAAAAAEAP3/BAABAAEAAAAEAPz/BAABAAEAAAAEAPv/BAABAAQAAAAEAPr/BAABAAEAAAAEAPn/BAABAAAAAAAFAP3/BAABAAEAAAAGAP3/BAACAAEAAAAGAPz/BAACAAEAAAAFAPz/BAABAAEAAAAGAPv/BAACAAEAAAAFAPv/BAABAAEAAAAGAPr/BAACAAEAAAAFAPr/BAABAAEAAAAFAPn/BAABAAAAAAAGAPn/BAACAAAAAAAHAP//BAACAAIAAAAHAP7/BAACAAAAAAABAPj/BAAAAAAAAAACAPj/BAACAAAAAAD8//3/BAAAAAAAAAD8//7/BAAAAAIAAAD9/wAABAAAAAEAAAD9/wEABAAAAAIAAAAAAPj/BAAFAAAAAAD///j/BAAEAAAAAAD+//j/BAAEAAAAAAD9//j/BAAEAAAAAAD8//j/BAAGAAEAAAD8//n/BAADAAMAAAD8//r/BAADAAMAAAD8//v/BAADAAMAAAD8//z/BAADAAQAAAD8////BAADAAIAAAD8/wAABAADAAMAAAD8/wEABAADAAMAAAD8/wIABAAGAAIAAAD9/wIABAAEAAAAAAD+/wIABAAEAAAAAAD//wIABAAEAAAAAAAAAAIABAAEAAAAAAABAAIABAAEAAAAAAACAAIABAAEAAAAAAADAAIABAAEAAAAAAAEAAIABAAEAAAAAAAFAAIABAAEAAAAAAAGAAIABAAEAAAAAAAHAAIABAAHAAIAAAAHAAEABAADAAMAAAAHAAAABAADAAIAAAAHAP3/BAADAAQAAAAHAPz/BAADAAMAAAAHAPv/BAADAAMAAAAHAPr/BAADAAMAAAAHAPn/BAADAAMAAAAHAPj/BAAHAAEAAAAGAPj/BAAEAAAAAAAFAPj/BAAEAAAAAAAEAPj/BAAEAAAAAAADAPj/BAADAAAAAAA=")
tile_set = ExtResource("3_xouyy")

[node name="Markers" type="Node2D" parent="."]

[node name="Exit1" type="Marker2D" parent="Markers"]
position = Vector2(-516, -264)
rotation = 3.1415927

[node name="Exit2" type="Marker2D" parent="Markers"]
position = Vector2(1044, -132)

[node name="Exit3" type="Marker2D" parent="Markers"]
position = Vector2(264, -1044)
rotation = 4.712389

[node name="Area2D" type="Area2D" parent="."]
visible = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
position = Vector2(264, -392)
shape = SubResource("RectangleShape2D_bjrfl")

[node name="Lights" type="Node2D" parent="."]
scale = Vector2(8.18, 8.18)

[node name="LightBulb" parent="Lights" instance=ExtResource("3_bjrfl")]
position = Vector2(0, -88)
scale = Vector2(0.5245902, 0.50178176)
color = Color(1, 0.2, 0.33333334, 1)
energy = 0.8
script = ExtResource("5_xouyy")
min_energy_mult = 0.8
max_energy_mult = 1.1
flicker_speed = 0.4

[node name="LightBulb3" parent="Lights" instance=ExtResource("3_bjrfl")]
position = Vector2(64, -16)
scale = Vector2(0.5245902, 0.50178176)
color = Color(1, 0.2, 0.33333334, 1)
energy = 0.8

[node name="LightBulb2" parent="Lights" instance=ExtResource("3_bjrfl")]
position = Vector2(71.99999, -80)
scale = Vector2(0.39111114, 0.37410626)
color = Color(0.14880532, 0.53504807, 0.5525077, 1)
energy = 0.8

[node name="LightBulb4" parent="Lights" instance=ExtResource("3_bjrfl")]
position = Vector2(-8, -8)
scale = Vector2(0.35555553, 0.34009653)
color = Color(0.6651676, 0.00067084644, 0.7303666, 1)
energy = 0.8

[node name="EnemyBase" parent="." node_paths=PackedStringArray("patrol_points") instance=ExtResource("3_5aa4i")]
position = Vector2(0, -16)
patrol_points = [NodePath("../PatrollingMarkers/Marker2D"), NodePath("../PatrollingMarkers/Marker2D2"), NodePath("../PatrollingMarkers/Marker2D3"), NodePath("../PatrollingMarkers/Marker2D4")]

[node name="PatrollingMarkers" type="Node2D" parent="."]

[node name="Marker2D" type="Marker2D" parent="PatrollingMarkers"]
position = Vector2(576, -64)

[node name="Marker2D2" type="Marker2D" parent="PatrollingMarkers"]
position = Vector2(-64, -576)
rotation = -1.5707964

[node name="Marker2D3" type="Marker2D" parent="PatrollingMarkers"]
position = Vector2(576, -576)
rotation = 3.1415927

[node name="Marker2D4" type="Marker2D" parent="PatrollingMarkers"]
position = Vector2(0, -128)
